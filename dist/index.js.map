{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import NProgress, { NProgressOptions } from \"nprogress\";\nimport React, { useEffect } from \"react\";\n\nimport Router from \"next/router\";\n\ninterface NextProgressProps {\n  height?: number | string;\n  color?: string;\n  delay?: number;\n  options?: Partial<NProgressOptions>;\n  nonce?: string;\n  customGlobalCss?: string;\n  disableSameRoute?: boolean;\n}\n\n/**\n * @param height Height of the progress bar.\n * @param color Color of the progress bar.\n * @param delay Delay of the animation - when page loads faster than the delay time progress bar won't be displayed.\n * @param disableSameRoute If true, progress bar won't be displayed when user travels the same route they're currently on.\n * @param options Options for - NProgress.configure(options).\n * @param customGlobalCss Custom NProgress styles - must be provided as a string that will go inside the <style jsx> tag. Color param won't work as you should set the color yourself inside custom css.\n */\nconst NextProgress = React.memo(\n  ({\n    height = \"2px\",\n    color = \"#29D\",\n    delay = 0,\n    options,\n    customGlobalCss,\n    disableSameRoute = false,\n  }: NextProgressProps) => {\n    const nextProgressStyles = (\n      <style>\n        {customGlobalCss ||\n          // prettier-ignore\n          //? Source: https://unpkg.com/nprogress@0.2.0/nprogress.css\n          `#nprogress{pointer-events:none}#nprogress .bar{background:${color};position:fixed;z-index:99999;top:0;left:0;width:100%;height:${typeof height === `string` ? height : `${height}px`}}#nprogress .peg,.nprogress-custom-parent #nprogress .bar,.nprogress-custom-parent #nprogress .spinner{position:absolute}#nprogress .peg{display:block;right:0;width:100px;height:100%;box-shadow:0 0 10px ${color},0 0 5px ${color};opacity:1;-webkit-transform:rotate(3deg) translate(0,-4px);-ms-transform:rotate(3deg) translate(0,-4px);transform:rotate(3deg) translate(0,-4px)}#nprogress .spinner{display:block;position:fixed;z-index:99999;top:15px;right:15px}#nprogress .spinner-icon{width:18px;height:18px;box-sizing:border-box;border:2px solid transparent;border-top-color:${color};border-left-color:${color};border-radius:50%;-webkit-animation:.4s linear infinite nprogress-spinner;animation:.4s linear infinite nprogress-spinner}.nprogress-custom-parent{overflow:hidden;position:relative}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}@keyframes nprogress-spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}`}\n      </style>\n    );\n\n    useEffect(() => {\n      options && NProgress.configure(options);\n\n      let timeout: NodeJS.Timeout;\n      const start: Handler = (e) => {\n          clearTimeout(timeout);\n          if (disableSameRoute && Router.route === e) return;\n          timeout = setTimeout(() => NProgress.start(), delay);\n        },\n        done: Handler = () => {\n          clearTimeout(timeout);\n          NProgress.done();\n        };\n\n      Router.events.on(\"routeChangeStart\", start);\n      Router.events.on(\"routeChangeComplete\", done);\n      Router.events.on(\"routeChangeError\", done);\n\n      return () => {\n        Router.events.off(\"routeChangeStart\", start);\n        Router.events.off(\"routeChangeComplete\", done);\n        Router.events.off(\"routeChangeError\", done);\n        clearTimeout(timeout);\n      };\n    }, []);\n\n    return nextProgressStyles;\n  },\n  () => true\n);\n\nexport default NextProgress;\n\n//? Unexported type from next/dist/shared/lib/mitt.d.ts\ndeclare type Handler = (...evts: any[]) => void;\n"],"names":["useEffect"],"mappings":";;;;;;;;AAeA;;;;;;;AAOG;AACH,IAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAC7B,UAAC,EAOmB,EAAA;AANlB,IAAA,IAAA,EAAA,GAAA,EAAA,CAAA,MAAc,EAAd,MAAM,GAAG,EAAA,KAAA,KAAA,CAAA,GAAA,KAAK,GAAA,EAAA,EACd,EAAc,GAAA,EAAA,CAAA,KAAA,EAAd,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,MAAM,GAAA,EAAA,EACd,EAAS,GAAA,EAAA,CAAA,KAAA,EAAT,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,CAAC,GAAA,EAAA,EACT,OAAO,aAAA,EACP,eAAe,GAAA,EAAA,CAAA,eAAA,EACf,EAAwB,GAAA,EAAA,CAAA,gBAAA,EAAxB,gBAAgB,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,KAAK,GAAA,EAAA,CAAA;AAExB,IAAA,IAAM,kBAAkB,IACtB,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,EACG,eAAe;;;QAGd,4DAA6D,CAAA,MAAA,CAAA,KAAK,EAAgE,+DAAA,CAAA,CAAA,MAAA,CAAA,OAAO,MAAM,KAAK,QAAQ,GAAG,MAAM,GAAG,EAAG,CAAA,MAAA,CAAA,MAAM,EAAI,IAAA,CAAA,EAAA,6MAAA,CAAA,CAAA,MAAA,CAA8M,KAAK,EAAA,WAAA,CAAA,CAAA,MAAA,CAAY,KAAK,EAAA,2VAAA,CAAA,CAAA,MAAA,CAA4V,KAAK,EAAA,qBAAA,CAAA,CAAA,MAAA,CAAsB,KAAK,EAAA,sXAAA,CAAsX,CACvoC,CACT,CAAC;AAEF,IAAAA,eAAS,CAAC,YAAA;AACR,QAAA,OAAO,IAAI,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AAExC,QAAA,IAAI,OAAuB,CAAC;QAC5B,IAAM,KAAK,GAAY,UAAC,CAAC,EAAA;YACrB,YAAY,CAAC,OAAO,CAAC,CAAC;AACtB,YAAA,IAAI,gBAAgB,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC;gBAAE,OAAO;AACnD,YAAA,OAAO,GAAG,UAAU,CAAC,YAAA,EAAM,OAAA,SAAS,CAAC,KAAK,EAAE,CAAjB,EAAiB,EAAE,KAAK,CAAC,CAAC;SACtD,EACD,IAAI,GAAY,YAAA;YACd,YAAY,CAAC,OAAO,CAAC,CAAC;YACtB,SAAS,CAAC,IAAI,EAAE,CAAC;AACnB,SAAC,CAAC;QAEJ,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;QAC5C,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;QAC9C,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAE3C,OAAO,YAAA;YACL,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;YAC7C,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;YAC/C,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;YAC5C,YAAY,CAAC,OAAO,CAAC,CAAC;AACxB,SAAC,CAAC;KACH,EAAE,EAAE,CAAC,CAAC;AAEP,IAAA,OAAO,kBAAkB,CAAC;AAC5B,CAAC,EACD,YAAM,EAAA,OAAA,IAAI,CAAJ,EAAI;;;;"}